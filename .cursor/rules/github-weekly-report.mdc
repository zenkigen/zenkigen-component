---
description: GitHub過去1週間の作業レポート作成手順
globs:
alwaysApply: false
---

# GitHub 週次作業レポート作成ルール

このルールは、GitHubリポジトリの過去1週間の作業を包括的にまとめたレポートを作成するための手順を定義します。

## 目的

- 過去1週間（7日間）のすべての開発活動を可視化
- mainブランチだけでなく、PR・作業中ブランチも含めた全体像を把握
- 実際のGitHub/Git履歴に基づいた正確な情報提供
- チーム内での情報共有とプロジェクト進捗の透明性向上

## 実行タイミング

- 週次レビュー時
- プロジェクト状況の報告が必要な時
- スプリント終了時のふりかえり
- 「過去1週間の作業をまとめて」と依頼された時

## 情報収集コマンド

### 1. PR情報の取得

```bash
gh pr list --limit 50 --state all --json number,title,state,createdAt,updatedAt,mergedAt,author,headRefName,additions,deletions,labels --jq '.[] | select(.updatedAt >= "YYYY-MM-DDT00:00:00Z")'
```

- 過去1週間に更新されたPRを取得
- `YYYY-MM-DD` は7日前の日付に置き換える

### 2. コミット履歴の取得

```bash
git log --all --since="YYYY-MM-DD" --pretty=format:"%h|%ad|%an|%s|%D" --date=short
```

### 3. ブランチ一覧の取得

```bash
git for-each-ref --sort=-committerdate refs/heads/ refs/remotes/origin/ --format='%(committerdate:short)|%(refname:short)|%(committername)|%(subject)' | head -30
```

### 4. 変更ファイル統計

```bash
# 最も変更されたファイル
git log --all --since="YYYY-MM-DD" --name-only --pretty=format: | grep -v '^$' | sort | uniq -c | sort -rn | head -20

# コントリビューター別コミット数
git log --all --since="YYYY-MM-DD" --pretty=format:"%an" | sort | uniq -c | sort -rn

# 総コミット数
git log --all --since="YYYY-MM-DD" --pretty=format:"%h" | wc -l

# 追加/削除行数の統計
git log --all --since="YYYY-MM-DD" --shortstat --pretty=format: | grep -E "file[s]? changed" | awk '{files+=$1; inserted+=$4; deleted+=$6} END {print "Files: " files ", Insertions: +" inserted ", Deletions: -" deleted}'
```

## レポート構成

レポートは以下のセクションで構成する：

### 必須セクション

1. **タイトルと期間**
   - タイトル: `# zenkigen-component 過去1週間の作業レポート`
   - 期間: `**期間**: YYYY年MM月DD日 〜 YYYY年MM月DD日`

2. **目次** 📑
   - 全セクションへのアンカーリンク付き目次

3. **概要** 📊
   - 総コミット数
   - PRの数（オープン/マージ済み/クローズ）
   - アクティブなブランチ数
   - 変更ファイル数
   - 追加/削除行数

4. **コントリビューター** 👥
   - 貢献者別のコミット数
   - 役割の説明（メイン開発者、bot等）

5. **マージ済みのPR** 🚀
   - PRごとの詳細情報
   - マージ日、変更量、内容、ラベル

6. **オープン中のPR** 🔄
   - 現在進行中のPR
   - 作成日、最終更新日、状態、内容

7. **作業中のブランチ** 🔨
   - PR未作成のアクティブなブランチ
   - 最終コミット日、作業内容

8. **最も変更されたファイル** 📂
   - Top 10のファイルと変更回数

9. **主要な作業内容カテゴリ別** 🎯
   - 🆕 新機能追加
   - 🐛 バグ修正
   - 📚 ドキュメント整備
   - 🎨 デザインシステム
   - 🤖 自動化・メンテナンス

10. **作業トレンド分析** 📈
    - 最も活発なブランチ
    - 主要なフォーカスエリア
    - 品質向上の取り組み

11. **次のアクション推奨** 🚦
    - 優先度高
    - 進行中
    - メンテナンス

12. **まとめ** 📝
    - 主なハイライト
    - 開発の特徴
    - 総括

## 出力形式

### ファイル名

```
github-weekly-report.md
```

### フォーマット

- **言語**: 日本語
- **形式**: Markdown
- **配置**: リポジトリルート

### スタイルガイド

- 絵文字を活用して視覚的に分かりやすく
- 表を使用して情報を整理
- リストとセクションを明確に区分
- 重要な情報は太字（`**text**`）で強調
- コード、ファイル名、コマンドはバッククォート（`` `text` ``）で囲む

## 注意事項

### 日付の扱い

- 常にシステムAPIから取得した正確な日付を使用
- 推測や仮の日付は記載しない
- タイムゾーンはJSTで統一
- 形式: `YYYY-MM-DD` または `YYYY年MM月DD日`

### データの正確性

- GitHub API（`gh`コマンド）とGit履歴の両方を使用
- PRの状態は最新情報を反映
- コミット数や変更行数は実測値を使用
- 推測や概算は使用しない

### カテゴリ分類

作業内容は以下のカテゴリで分類：

- **新機能追加**: 新しいコンポーネントや機能の実装
- **バグ修正**: 既存機能の問題修正
- **ドキュメント**: 仕様書、README、コメントの追加・更新
- **デザインシステム**: カラートークン、テーマ、スタイルの変更
- **リファクタリング**: コード構造の改善（機能変更なし）
- **テスト**: テストコードの追加・修正
- **設定・ツール**: ビルド設定、CI/CD、依存関係
- **自動化・メンテナンス**: Renovate bot等の自動更新

### トレンド分析のポイント

- 最も多くのコミットがあったブランチ
- 集中的に作業されているエリア
- 品質向上の取り組み（テスト、アクセシビリティ、型安全性）
- ドキュメント整備の状況

## 実行手順

1. **Agent Modeに切り替え**
   - 複数のターミナルコマンド実行が必要

2. **情報収集**
   - 上記のコマンドを順次実行
   - 出力結果を収集・整理

3. **レポート生成**
   - 収集した情報を構造化
   - Markdown形式でレポート作成

4. **ファイル保存**
   - `github-weekly-report.md` として保存
   - リポジトリルートに配置

5. **確認**
   - 目次リンクの動作確認
   - 表のフォーマット確認
   - 日付の正確性確認

## 参考

- 過去のレポート: `github-weekly-report.md`（作成後）
- Git コマンド: https://git-scm.com/docs
- GitHub CLI: https://cli.github.com/manual/
