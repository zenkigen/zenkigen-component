## コンポーネント仕様ドキュメント運用ルール

本ドキュメントは、`@src/` の各コンポーネントに対して `docs/component/` に作成・更新する「コンポーネント仕様書」の運用ルールを定義する。記載はすべて日本語（である調）で統一する。

### 目的と適用範囲

- **目的**: 仕様の認識齟齬を防ぎ、実装・設計・レビュー・利用の共通基盤とする。
- **適用**: `packages/component-ui/src` 配下のユーザー向け公開コンポーネント（および必要に応じてそのサブコンポーネント）。

### 配置と命名

- **配置**: `docs/component/` 配下に置く。
- **命名**: kebab-case で `[*component-name*]-specification.md`。
  - 例: `segmented-control-specification.md`
- **サブコンポーネント**: 原則、親コンポーネントの仕様書内に章として記載する。親から独立利用される場合のみ個別ファイルを作成する（命名は `parent-child-specification.md`）。

### 作成タイミングとテンプレート

- **新規作成**: コンポーネント初実装時に同一PR内で作成する。
- **テンプレート**: `docs/component-specification-template.md` を必ず使用する。
  - 書式・内容の詳細は `docs/component-specification-format-guide.md` を参照。
  - 代表例: `docs/component/text-area-specification.md`、`docs/component/select-specification.md`。

### 必須セクション（テンプレ準拠）

以下は最低限必須。テンプレの見出し構造・順序を維持すること。

1. タイトル（`# [ComponentName] コンポーネント仕様書`）
2. 目次（階層化したアンカー付き）
3. 概要（目的と主要機能を1–2文）
4. インポート（使用パッケージと例）
5. 基本的な使用方法（最小実装例）
6. Props（必須/オプション/継承/必要時の排他的グループ・特殊機能）
7. 状態とスタイル（サイズ、状態、その他スタイル仕様）
8. 使用例（基本＋バリエーション2例以上が望ましい）
9. アクセシビリティ（フォーカス/キーボード/aria 等）
10. 技術的な詳細（必要時）
11. 注意事項（重要な制約）
12. スタイルのカスタマイズ（`@zenkigen-inc/component-config`/theme への言及）
13. 更新履歴（後述のルールで更新）

### 記述ルール

- **言語**: 日本語・である調。
- **用語**: 一貫した用語を用い、専門用語は必要最小限。
- **コードブロック**: 言語指定を必須（例: ```typescript）。
- **Props表**: プロパティ名・型・デフォルト値はバッククォートで囲む。真偽値は `true`/`false` を明示。
- **表記**: デフォルト値は必ず記載。型は実装と厳密に一致させる。
- **アクセシビリティ**: `forwardRef`、キーボード操作、フォーカス可視性、`disabled` の扱い等を明記。
- **スタイル**: Tailwindクラスとデザイントークンの対応を具体化（`@zenkigen-inc/component-theme` 参照）。

### 更新ルール（必ずドキュメントを更新する）

次のいずれかに該当する場合、コンポーネント調整と同一PRで仕様書を更新すること。

- API変更（Props追加/削除/型変更/デフォルト値変更）
- 挙動変更（選択解除/自動スクロール/外部クリック検知/フォーカス管理 等）
- 見た目の変更（サイズ・タイポグラフィ・ボーダー・色トークン・アイコン）
- アクセシビリティ仕様の変更（キーボード操作、役割、コントラスト）
- 注意事項や制約の追加・変更
- 破壊的変更（Breaking Change）の導入

更新時は以下を行う。

1. 関連セクションの本文・表・コード例を最新化。
2. 使用例を追加/修正し、最低限の動作再確認。
3. 「更新履歴」に追記（フォーマット準拠）。
4. ルートの `README.md` にある「コンポーネント一覧・仕様書」セクションを変更内容に合わせて同期（リンク追加/更新/削除）。

### 更新履歴の書式

- 形式: `YYYY-MM-DD HH:mm JST`（タイムゾーンはJSTで統一）。
- 記入例:

  | 日付                 | 内容                                  | 担当者 |
  | -------------------- | ------------------------------------- | ------ |
  | 2025-10-17 10:30 JST | Props `size` を追加し表と使用例を更新 | -      |

> 日時はシステムAPIから取得した正しい値を用いること（推測値の記載禁止）。

### PR要件（チェックリスト）

PR説明に次を含め、レビュー観点を明確化する。

- [ ] 対象コンポーネントの仕様書が存在し、テンプレ順に必須セクションが埋まっている
- [ ] Props表（型・デフォルト値）が実装と一致している
- [ ] 使用例が実在APIで成立し、主要パターンが網羅されている
- [ ] 状態とスタイル（サイズ/状態/色/タイポグラフィ）が反映済み
- [ ] アクセシビリティ項目（フォーカス/キーボード/disabled 等）を更新
- [ ] 注意事項・制約・特殊機能の詳細を更新
- [ ] 更新履歴に今回の変更を `YYYY-MM-DD HH:mm JST` で追記
- [ ] ルート `README.md` の「コンポーネント一覧・仕様書」を同期（リンク・項目の整合）
- [ ] アイコンは `@zenkigen-inc/component-icons` の `Icon` のみを使用（外部/生SVG禁止）
- [ ] トランジッションは未使用、または tailwind 設定済みのもののみ
- [ ] 関連ガイド（`design-guidelines.md`・`theme-system.md`）と整合
- 参考: `.cursor/rules/create-pullrequest.mdc` の手順に従う

### 参照ドキュメント

- 仕様テンプレ: `docs/component-specification-template.md`
- フォーマットガイド: `docs/component-specification-format-guide.md`
- 実装ガイドライン: `docs/coding-guidelines.md`
- デザインシステム: `docs/design-guidelines.md`, `docs/theme-system.md`
- 代表例: `docs/component/select-specification.md`, `docs/component/text-area-specification.md`, `docs/component/avatar-specification.md`

### 運用

- 実装変更とドキュメント更新は同一PRで行う。
- 大規模変更時は、関連コンポーネントの仕様書も横断的に更新する。
- 仕様の曖昧さが残る場合は、テンプレの「注意事項」または「技術的な詳細」に明記して解消する。
