# 設計ガイドライン

このドキュメントでは、Zenkigen Component ライブラリの設計思想とアーキテクチャ方針について説明します。これらのガイドラインは、ライブラリの一貫性と保守性を保つための基本原則です。

## 目次

1. [設計思想](#設計思想)
2. [コンポーネント設計パターン](#コンポーネント設計パターン)
3. [アイコン使用方針](#アイコン使用方針)
4. [トランジション方針](#トランジション方針)
5. [実装時の考慮事項](#実装時の考慮事項)

---

## 設計思想

Zenkigen Component ライブラリは、以下の設計思想に基づいて構築されています：

### 一貫性の重視

- **統一されたデザインシステム**: すべてのコンポーネントがZENKIGENのデザインシステムに準拠
- **予測可能なAPI**: 類似したコンポーネント間で一貫したプロパティ設計
- **標準化されたパターン**: 共通の実装パターンを採用することで学習コストを削減

### 柔軟性と再利用性

- **コンポーザブルな設計**: 小さなコンポーネントを組み合わせて複雑なUIを構築
- **カスタマイズ可能**: テーマシステムによる外観のカスタマイズをサポート
- **ポリモーフィックな実装**: `elementAs` プロパティによる柔軟な要素選択

### 開発体験の向上

- **型安全性**: TypeScriptによる厳格な型定義
- **直感的なAPI**: 自然で覚えやすいプロパティ名
- **包括的なドキュメント**: Storybookと詳細なドキュメントによるサポート

---

## コンポーネント設計パターン

### Compound Component Pattern の採用

構造的なコンポーネントは **Compound Component Pattern** で設計することを必須とします。

#### 採用理由

1. **関心の分離**: 各サブコンポーネントが明確な責任を持つ
2. **柔軟性**: 必要な部分のみを組み合わせて使用可能
3. **可読性**: コンポーネントの構造がJSXで明確に表現される
4. **拡張性**: 新しいサブコンポーネントを追加しやすい

#### 実装例

```tsx
// ✅ 良い例: Compound Component Pattern
<ComponentName>
  <ComponentName.SubComponent>内容1</ComponentName.SubComponent>
  <ComponentName.SubComponent>内容2</ComponentName.SubComponent>
</ComponentName>

// ❌ 悪い例: props経由での構造定義
<ComponentName items={[...]} />
```

#### 対象コンポーネント

構造的なコンポーネント（複数の子要素を持つコンポーネント）は Compound Component Pattern で実装します。

#### 実装ガイドライン

```tsx
// メインコンポーネント
export const ComponentName = ({ children, ...props }) => {
  return <div {...props}>{children}</div>;
};

// サブコンポーネントの定義
ComponentName.SubComponent = ({ children, ...props }) => {
  return <div {...props}>{children}</div>;
};
```

---

## アイコン使用方針

### 統一されたアイコンコンポーネントの使用

アイコンは **zenkigen-component に含まれる Icon コンポーネントのみ** を使用することを必須とします。

#### 採用理由

1. **一貫性**: すべてのアイコンが統一されたスタイルとサイズ
2. **保守性**: アイコンの変更や追加が一元管理される
3. **最適化**: バンドルサイズの最適化とパフォーマンス向上
4. **アクセシビリティ**: 適切なaria属性とalt textの統一

#### 使用方法

```tsx
import { Icon } from '@zenkigen-inc/component-icons';

// ✅ 良い例: Icon コンポーネントを使用
<Icon name="iconName" />

// ❌ 悪い例: 外部のアイコンライブラリや直接的なSVG使用
<ExternalIcon /> {/* 禁止 */}
<svg>...</svg> {/* 禁止 */}
```

---

## トランジション方針

### トランジッションの制限的使用

基本的に **トランジッションは使用しない** ことを原則とします。

#### 制限理由

**設計段階**: 現在トランジッションに関する設計方針が未確定のため、使用を制限しています。

#### 例外的使用条件

トランジッションが必要な場合は、**tailwindConfig に指定されているもののみ** を使用します：

```tsx
// ✅ 良い例: tailwindConfig で定義されたトランジッション
<div className="transition-opacity">
  内容
</div>

// ❌ 悪い例: カスタムトランジッション・外部ライブラリ
<div style={{ transition: '...' }}>内容</div> {/* 禁止 */}
<ExternalAnimationComponent>内容</ExternalAnimationComponent> {/* 禁止 */}
```

---

## 実装時の考慮事項

### 設計パターンの選択

新しいコンポーネントを実装する際は、以下の順序で検討してください：

1. **既存パターンの活用**: 類似コンポーネントのパターンを踏襲
2. **Compound Pattern の適用**: 構造的コンポーネントかどうかを判断
3. **Icon コンポーネントの使用**: アイコンが必要な場合は必須
4. **トランジッションの必要性**: 本当に必要かを慎重に検討

### レビュー時のチェックポイント

コードレビュー時は以下を確認してください：

- [ ] Compound Component Pattern が適切に実装されているか
- [ ] Icon コンポーネント以外のアイコンが使用されていないか
- [ ] 不要なトランジッションが追加されていないか
- [ ] tailwindConfig で定義されていないトランジッションが使用されていないか

---

このガイドラインに従うことで、Zenkigen Component ライブラリは一貫性があり、保守しやすく、使いやすいコンポーネントライブラリとして成長していくことができます。
