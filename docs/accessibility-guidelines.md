# アクセシビリティガイドライン

Zenkigen Component のアクセシビリティ対応方針と実装ルールをまとめます。

## 目次

- [1. 基本方針](#1-基本方針)
- [2. アクセシビリティへの取り組み](#2-アクセシビリティへの取り組み)
- [3. 自動アクセシビリティチェック](#3-自動アクセシビリティチェック)
- [4. フォーカス表示](#4-フォーカス表示)
- [5. 開発時のチェックポイント](#5-開発時のチェックポイント)
- [6. 参考リンク](#6-参考リンク)

---

## 1. 基本方針

### 目標とする適合レベル

ウェブコンテンツのアクセシビリティに関する国際的なガイドラインである「Web Content Accessibility Guidelines (WCAG)」の最新版における適合レベル「A」、「AA」の一部に準拠することを目標とします。

**目標: [WCAG 2.2](https://waic.jp/translations/WCAG22/) レベル A + AA の一部**

**追加で対応する達成基準（AA）:**

| 達成基準                                                                              | 概要                                      |
| ------------------------------------------------------------------------------------- | ----------------------------------------- |
| [1.4.3 コントラスト（最低限）](https://waic.jp/translations/WCAG21/#contrast-minimum) | テキストと背景のコントラスト比 4.5:1 以上 |
| [1.4.4 テキストのサイズ変更](https://waic.jp/translations/WCAG21/#resize-text)        | 200%まで拡大可能                          |
| [1.4.5 文字画像](https://waic.jp/translations/WCAG21/#images-of-text)                 | 文字画像ではなくテキストを使用            |
| [2.4.7 フォーカスの可視化](https://waic.jp/translations/WCAG21/#focus-visible)        | キーボードフォーカスが視覚的にわかる      |

### 技術的な対応範囲

| 項目               | 対応状況                        |
| ------------------ | ------------------------------- |
| キーボード操作     | 全コンポーネント対応            |
| スクリーンリーダー | ARIA 属性による対応             |
| フォーカス管理     | 視覚的フィードバックあり        |
| 色のコントラスト   | デザイントークンで管理          |
| 自動チェック       | Storybook addon-a11y (axe-core) |

---

## 2. アクセシビリティへの取り組み

### 企画・設計・開発プロセスへの組み込み

新規開発においては、企画・設計の早い段階からアクセシビリティを要件に含め、実装、テストの各段階で検証を行います。

- **開発フロー**:
  1. 設計段階で WCAG 達成基準を確認
  2. 実装時に ARIA 属性・キーボード操作を実装
  3. Storybook addon-a11y で自動検証
  4. コードレビューでアクセシビリティ観点を確認

### 既存機能の現状把握と改善

既存の製品・サービスについてアクセシビリティの現状を定期的に評価し、改善計画を策定・実行するサイクルを構築します。

- **コンポーネント棚卸し会**（隔週実施）
  - 実装と Figma で構造や Props を合わせる
  - WCAG 2.2 チェックリストを関係者で確認し、対応範囲を決定
  - コンポーネント単位での WCAG 準拠を目指す

### デザインシステムによる品質の担保

アクセシブルな UI コンポーネントをデザインシステムで提供し、製品・サービス全体で一貫したアクセシビリティ品質を担保します。

---

## 3. 自動アクセシビリティチェック

### Storybook addon-a11y

Storybook に `@storybook/addon-a11y` を導入済みです。各 Story でアクセシビリティ違反を自動検出します。

```bash
# Storybook 起動
yarn storybook
```

- **Accessibility タブ**: 各 Story のアクセシビリティレポートを確認
- **axe-core**: WCAG 2.2 準拠のルールセットを使用
- **日本語ロケール**: エラーメッセージが日本語で表示

### 確認すべき項目

Stories を作成したら、以下を確認します:

- Accessibility タブに違反（Violations）がないこと
- 不完全な項目（Incomplete）を確認し、必要に応じて対応
- パス済み（Passes）の項目数が適切であること

---

## 4. フォーカス表示

### focusVisible テーマ変数

フォーカスリングのスタイルは `@zenkigen-inc/component-theme` の `focusVisible` を使用します。

| 変数                  | 用途                 |
| --------------------- | -------------------- |
| `focusVisible.normal` | 標準フォーカス       |
| `focusVisible.inset`  | 内側フォーカスリング |

### フォーカスリングの原則

- **表示条件**: キーボード操作時のみ表示（`:focus-visible`）
- **スタイル**: `outline` + `outline-offset` による視認性の高いリング
- **色**: デザイントークンで管理

---

## 5. 開発時のチェックポイント

### 新規コンポーネント作成時

1. **設計段階**
   - 適切な HTML 要素を選択（セマンティックな要素優先）
   - 必要な ARIA 属性を洗い出し

2. **実装段階**
   - キーボード操作を実装
   - フォーカスリング表示を確認
   - ARIA 属性を設定

3. **テスト段階**
   - Storybook addon-a11y で自動チェック
   - ユニットテストでアクセシビリティ属性を検証
   - 手動でキーボード操作を確認

### 既存コンポーネント修正時

1. addon-a11y の Violations が増えていないことを確認
2. 既存のアクセシビリティテストがパスすることを確認
3. キーボード操作が壊れていないことを確認

---

## 6. 参考リンク

### 関連ドキュメント

- [テスト実装ガイドライン](./testing-guidelines.md) - アクセシビリティ属性のテスト方法

### WCAG・WAI-ARIA

- [WCAG 2.1 日本語訳](https://waic.jp/translations/WCAG21/)
- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)

### ツール・ライブラリ

- [axe-core Rules](https://dequeuniversity.com/rules/axe/)
- [Storybook Accessibility Addon](https://storybook.js.org/addons/@storybook/addon-a11y)
